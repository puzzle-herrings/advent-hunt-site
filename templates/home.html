{% extends "base.html" %}
{% load static %}
{% block body %}
  <link href="{% static 'css/home.css' %}" rel="stylesheet" />
  <section class="hero is-primary">
    <div class="hero-body container">
      {% include "partials/announcement_message.html" %}
      {% include "partials/messages.html" %}
      <p class="has-text-centered block">
        <span class="is-size-5">Peppermint Herrings üéè present...</span>
      </p>
      <h1 class="title home-title has-text-centered block">
        <span><span class="home-title-small">the</span> Advent Puzzle Hunt</span>
      </h1>
      <div class="has-text-centered block">
        <picture class="splash">
          <source srcset="{% static 'images/cover_art-808x600-q50.avif' %} 1x,
                          {% static 'images/cover_art-1616x1200-q50.avif' %} 2x,
                          {% static 'images/cover_art-2424x1800-q50.avif' %} 3x"
                  width="808"
                  height="600"
                  type="image/avif"
                  alt="Illustration of two people solving puzzles with an elf in front of an advent calendar board.">
          <source srcset="{% static 'images/cover_art-808x600-q75.webp' %} 1x,
                          {% static 'images/cover_art-1616x1200-q75.webp' %} 2x"
                  width="808"
                  height="600"
                  type="image/webp"
                  alt="Illustration of two people solving puzzles with an elf in front of an advent calendar board.">
          <img src="{% static 'images/cover_art-808x600.png' %}"
               width="808"
               height="600"
               alt="Illustration of two people solving puzzles with an elf in front of an advent calendar board.">
        </picture>
      </div>
    </div>
  </section>
  <section class="section in-front">
    {% if not hunt_is_live %}
      <div class="container">{% include "partials/story_prehunt.html" %}</div>
    {% else %}
      <div class="columns is-centered">
        <div class="column is-one-fifth has-text-centered">
          <picture class="story-art-red">
            <source srcset="{% static 'images/red-173-280-q50.avif' %} 1x,
                            {% static 'images/red-346x560-q50.avif' %} 2x,
                            {% static 'images/red-519x840-q50.avif' %} 3x"
                    width="173"
                    height="280"
                    type="image/avif"
                    alt="Illustration of Red, Santa's Chief of Staff, smiling and waving.">
            <source srcset="{% static 'images/red-173-280-q75.webp' %} 1x,
                            {% static 'images/red-346x560-q75.webp' %} 2x,
                            {% static 'images/red-519x840-q75.webp' %} 3x"
                    width="173"
                    height="280"
                    type="image/webp"
                    alt="Illustration of Red, Santa's Chief of Staff, smiling and waving.">
            <img src="{% static 'images/red-173-280.png' %} 1x, {% static 'images/red-346x560.png' %} 2x, {% static 'images/red-519x840.png' %} 3x"
                 width="173"
                 height="280"
                 alt="Illustration of Red, Santa's Chief of Staff, smiling and waving.">
          </picture>
        </div>
        <div class="column is-two-fifths">
          <p class="block">
            "Welcome to the North Pole!" you hear as you step down off the sleigh, freshly arrived after a smooth and on-time flight. The greeting comes from a sharply dressed elf, giving you a warm smile and wave. "I'm Red, Santa's Chief of Staff," he introduces himself. This must be the elf you've been in contact with to coordinate your trip.
          </p>
          <p class="block">
            Before you can respond, you get interrupted by shouts of "Red! Red!" A second elf is running up, frantically waving her arms. The two elves enter into a furious whispered conversation. You watch Red become increasingly distressed‚Ä¶
          </p>
          <p class="block">
            <a class="button is-primary" href="{% url "story" %}">Continue reading</a>
          </p>
        </div>
      </div>
    {% endif %}
  </section>
  <section class="in-front">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-one-third">
          <div class="box info-box">
            <h2 class="title is-3">What</h2>
            <p>
              A puzzle hunt released as an advent calendar‚Äîone puzzle a day. See our <a href="{% url 'about' %}">About</a> page for more information.
            </p>
          </div>
        </div>
        <div class="column is-one-third">
          <div class="box info-box">
            <h2 class="title is-3">When</h2>
            <p>
              December 1 through December 24, 2024. Puzzle pages and answer checkers will be released daily at
              <a href="https://everytimezone.com/?t=674cf880,1"
                 rel="noopener noreferrer">12:01 a.m. (midnight) UTC</a>.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="snowflakes" aria-hidden="true">
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
    <div class="snowflake">
      <div class="inner">‚ùÖ</div>
    </div>
  </div>
  <!--Keep scrolling indicator -->
  <div class="keep-scrolling is-flex is-flex-direction-column is-justify-content-end has-text-white">
    <div class="has-text-centered keep-scrolling-chevron is-size-4">
      <i class="bi bi-chevron-double-down"></i>
    </div>
    <div class="keep-scrolling-text is-align-self-flex-end has-text-centered is-size-5">Keep&nbsp;scrolling</div>
  </div>
  <script>
    // Fade out keep scrolling indicator
    function handleScroll() {
      const scrollIndicator = document.querySelector('.keep-scrolling');
      const scrollPercentage = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
      const startingOpacity = 0.5;
      const fadeOutThreshold = 20;

      // Start fading out at 0% scroll and completely fade out by {fadeOutThreshold}% scroll
      if (scrollPercentage <= fadeOutThreshold) {
        const opacity = startingOpacity - startingOpacity*(scrollPercentage / fadeOutThreshold);
        scrollIndicator.style.opacity = opacity;
      } else {
        scrollIndicator.style.opacity = 0;
      }
    }
    // Add scroll event listener
    window.addEventListener('scroll', handleScroll);
    // Initial call to set the initial state
    handleScroll();
  </script>
  <!--End keep scrolling indicator-->
{% endblock body %}
